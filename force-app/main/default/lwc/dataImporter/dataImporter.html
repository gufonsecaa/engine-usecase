<template>
  <div class="main-container">

    <lightning-card title="Data Importer">
      <div class="content slds-var-p-around_medium">

        <lightning-progress-indicator type="base" current-step={currentStep} class="slds-var-m-top_medium slds-var-m-bottom_large">
          <lightning-progress-step label="Import" value="setup-import-step"></lightning-progress-step>
          <lightning-progress-step label="Mapping Columns" value="mapping-columns-step"></lightning-progress-step>
          <lightning-progress-step label="Preview Import" value="preview-import-step"></lightning-progress-step>
          <lightning-progress-step label="Results" value="results-step"></lightning-progress-step>
        </lightning-progress-indicator>

        <template lwc:if={isSetupImportStep}>
          <c-setup-import onsetupfinished={handleSetupFinished}></c-setup-import>
        </template>

        <template lwc:elseif={isMappingColumnsStep}>
          <c-map-columns
            target-object={targetObject}
            content-version-id={contentVersionId}
            onmappingfinished={handleMappingFinished}>
          </c-map-columns>
        </template>

        <template lwc:elseif={isPreviewImportStep}>
          <c-preview-import
            content-version-id={contentVersionId}
            column-mapping={columnMapping}
            file-info={fileInfo}
            onpreviewimportfinished={handlePreviewImportFinished}>
          </c-preview-import>
        </template>

        <template lwc:elseif={isResultsStep}>
          <c-import-stats
            file-info={fileInfo}
            column-mapping={columnMapping}
            import-record-id={importRecordId}>
          </c-import-stats>
        </template>

      </div>
    </lightning-card>

  </div>
</template>
