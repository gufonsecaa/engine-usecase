<template>
  <div class="section-title slds-var-m-bottom_medium">
    Import Data Summary
  </div>

  <div class="slds-var-m-bottom_medium">
    <c-file-info file={fileInfo} column-mapping={columnMapping}></c-file-info>
  </div>

  <template lwc:if={isLoading}>
    <lightning-spinner alternative-text="Loading" size="xx-small" variant="base"></lightning-spinner>
  </template>

  <template lwc:if={importData}>
    <div class="section-title slds-var-m-vertical_medium">
      Importing Stats
    </div>

    <div class="stats-container slds-var-m-top_small">
      <div class="stats-item">
        <div class="title-label">Job Status</div>
        <template lwc:if={isProcessingStatus}>
          <div class="stats-value">
            <div class="spin">
              <svg class="slds-icon slds-icon-text-default slds-icon_x-small" aria-hidden="true">
                <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#spinner"></use>
              </svg>
            </div>
            <span class="slds-var-m-left_x-small">Processing</span>
          </div>
        </template>
        <template lwc:else>
          <div class="stats-value">
            <span>{importData.status}</span>
          </div>
        </template>
      </div>
    </div>

    <div class="stats-container slds-var-m-top_large">
      <div class="stats-item">
        <div class="title-label">Processed rows</div>
        <div class="stats-value">{importData.processedRows} of {importData.numberOfLines}</div>
      </div>

      <div class="stats-item">
        <div class="title-label">Success</div>
        <div class="stats-value">{importData.successRows}</div>
      </div>

      <div class="stats-item">
        <div class="title-label">Errors</div>
        <div class="stats-value">{importData.errorRows}</div>
      </div>

      <template lwc:if={isDraftStatus}>
        <div class="stats-item">
          <lightning-button
            icon-name="utility:play"
            icon-position="right"
            variant="brand"
            label="Start import"
            onclick={handleStartImport}>
          </lightning-button>
        </div>
      </template>
    </div>
  </template>

</template>
